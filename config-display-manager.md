# Configure Window Manager

## XDG Configuration Scheme

In this section, I configure a selection of apps and things that we need. Note that these things are stored in directories 
https://wiki.archlinux.org/title/XDG_Base_Directory
I try to follow this as much as possible, but if it gets too painful, I'll just do whatever the app wants. Note, however, that not following this scheme does make everything a lot more confusing, since you have to remember where all of your config files are.

You'll notice that when you initially boot into Arch, you're just presented with a terminal. This is not very easy to work with. 

Make sure you are a superuser for all of the following steps. That is, make sure you are logging in as `root`.

## Configure Drivers

Use the following command to determine what graphics card you have:

```bash
$ lspci -v | grep -A1 -e VGA -e 3D
```

In my case, this outputs:

```
VGA Compatible Controller: NVIDIA corporation GP107M (GeForce GTX 1050 Ti Mobile) (rev a1) ...
```

This means I have a GTX 1050Ti. Further, verify the [NVIDIA codenames page](https://nouveau.freedesktop.org/CodeNames.html#NV50) suggests that I have a `Pascal` project card (i.e.  NV137 (GP107)	GeForce GTX (1050, 1050 Ti))

According to [the Arch Wiki](https://wiki.archlinux.org/title/NVIDIA), I should be using the `nvidia` package:

```
$ packman -S nvidia
```

In my case, I want NVIDIA Optimus so I can switch between integrated graphics and my GPU. This allows me to save battery power.

https://github.com/Askannz/optimus-manager?tab=readme-ov-file

## Configure Xorg

```bash
pacman -S xorg xterm
```

The user configuration files for `xterm` are stored in `/etc/X11/xorg.conf.d/`. The basic configuration file is at `/etc/X11/xorg.conf.`

In my case, I run the command:

```
$ nvidia-xconfig
```

This *replaces* the config file under `/etc/X11/xorg.conf` with a custom file, generated by the driver. You'll notice that the driver installer does a lot of setup for you. If you have successfully installed drivers, you should be able to run:

```
$ xinit
```

In theory, you should be greeted with a completely black screen and nothing should happen.

> [!NOTE]
> It took me quite a bit of trial and error to get this to work. If you're experiencing difficulties, see my [troubleshooting xorg]() page for possible solutions.
>

TODO: Expand on terminal emulators and what exactly this does.

I'm now greeted with a completly black screen. To get out, press `CTRL + ALT + F2` and press `CTRL + C`.

Alternatively, switch to a new terminal with `CTRL + ALT + F3` and run:

```bash
$ pkill -15 Xorg
```

## Configure i3wm

We're going to use `i3wm`, which is a tiling window manager. This should be done as the root user.

First, copy 

```
cp /etc/X11/xinit/xinitrc ~/.xinitrc
```

Run `nvim ~/.xinitrc`. Comment out the bottom lines and add:

```
exec i3
```

To ensure that X starts automatically on user login, we want to edit the `/etc/profile` file. This file is run by bash on every user login.

`sudo nvim /etc/profile`

Put the following at the end:

```bash
# Start x for all signed in uers
if [ -z "$DISPLAY" ] && [ "$XDG_VTNR" = 1 ]; then
  exec startx
fi
```

### Configure DMENU

We need a program launcher. A popular option to use is called `dmenu`. 

```bash
$ sudo pacman -S dmenu
```

## Configure i3Status

Now, I want to configure a custom config file for each user. 

https://wiki.archlinux.org/title/Xorg